LINK 800

MARK GRAB_FILE
COPY M X
TEST X = -9999
TJMP END

MODE
GRAB X
MARK READ
COPY F M ; NAME
; (BA + ZA + ABP)/3
COPY F X
ADDI X F X
ADDI X F X
DIVI X 3 T ; SAVE OFF
; (WRT * OI) / OD
COPY F X
MULI X F X
DIVI X F X
ADDI X T T ; ADD PARTS
; ( PC - PS ) * 20
SUBI F F X
MULI X 20 X

ADDI X T X ; ADD PARTS
COPY X M ; EMBER SCORE
DROP
MODE
JUMP GRAB_FILE

MARK END
MODE
COPY -9999 M ; TW SIG
; HELP FIND THE MAX
MAKE
COPY M F
MARK CHECK_MAX
SEEK -9999
COPY M X
TEST X = -9999
TJMP MAX_END
TEST X > F
TJMP NEW_MAX
JUMP CHECK_MAX

MARK NEW_MAX
SEEK -9999
COPY X F
JUMP CHECK_MAX

MARK MAX_END
COPY F M
WIPE